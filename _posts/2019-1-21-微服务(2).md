---
layout: post
title:  微服务基础(2)
date:   2019-1-21 00:00:00 +0800
categories: 微服务
tag: 微服务
---

* content
{:toc}


### 微服务数据库独立
   ```
   1、在单体结构中所有业务都是使用一个数据库，但是随着业务的增加，所有表公用一个库，多表难以维护和管理，数据量增加导致查询速度变慢
   2、微服务依据业务划分服务，每个服务运行在自己的进程中，而且每个服务都有自己独立的数据库，即使业务增加，只需要服务之间接口调用，不需要进行
      数据库集成。
   3、数据库独立便于以后迁移数据库。如下图
   ```
   ![image](https://beautifulgirlzhangxiaogui.top/styles/images/2.png)
### 微服务自动化部署及管理
   ```
   1、微服务系统中，整个系统会被拆分为若干个服务，每个服务是一个独立运行的程序，单体系统只需要部署一次，而微服务有多少个服务就需要部署多少次
   2、Docker容器部署微服务，Jenkins自动部署
   3、微服务需要进行集中化管理，SpringCloud的Eureka注册服务发现服务，Zookeeper、Consul等
   4、分布式系统是由集群部署的，由很多台服务器共同完成用户请求，分布式系统是通过网络协议进行通信的，因此分布式系统在哪部署都可以(不用区分地区和机房)。
   ```
### 解决微服务中的雪崩效应--熔断机制
   ``` 
   1、由于微服务是分布式架构，需要考虑服务的独立性和相互调用的可靠性，以及分布式事务、全局锁、全局ID。
   2、分布式系统集群化部署会给数据的一致性带来问题，由于服务与服务之间是通过通讯协议通信的，如果网络不好将会对系统产生影响。
   3、分布式系统中服务与服务之间相互依赖，如果出现网络延迟或者单个服务出现问题，在高并发的情况下就会导致线程阻塞，在极短的时间内该服务的线程资源就会消耗  完，最终导致该服务不能用，因为服之间是依赖的，因此导致整个系统不可用，这就是雪崩效应。
   4、为防止雪崩效应、采用熔断机制
   ```
   
